--monitoring index usage
SELECT
	tbl.name AS TableName,
	idx.name AS IndexName,
	idx.type_desc AS IndexType,
	idx.is_primary_key AS IsPrimaryKey,
	idx.is_unique AS IsUnique,
	idx.iS_disabled AS IsDisabled,
	s.user_seeks AS Seeks,
	s.user_scans AS Scans,
	s.user_lookups AS Lookups,
	s.user_updates AS Updates,
	s.last_user_seek AS LastSeek,
	s.last_user_scan AS LastScan,
	COALESCE (s.last_user_seek,s.last_user_scan) AS Lastupdate
FROM sys.indexes idx
JOIN sys.tables tbl
ON idx.object_id = tbl.object_id
LEFT JOIN SYS.dm_db_index_usage_stats s
on s.object_id = idx.object_id
AND s.index_id = idx.index_id
order BY tbl.name, idx.name;

